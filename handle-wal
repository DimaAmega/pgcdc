#!/usr/bin/env node

const fs = require("fs");
const readline = require("readline");

const allLinesStream = readline.createInterface({
	input: process.stdin
});

(async () => {
	const fileToDump = process.env.FILE_TO_DUMP || "wal2.txt";
	for await (let line of allLinesStream) {
		const action = JSON.parse(line);
		console.log(action);
		fs.appendFileSync(fileToDump, `${line}\n`);
	}
})();
